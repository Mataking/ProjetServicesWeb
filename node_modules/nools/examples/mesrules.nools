define Output {
	text : '',
	constructor : function(message){
		this.text = message;
	}
}

//Tout message commencant par kevin

rule Rule1 {
	when {
		out : Output out.text =~ /^kevin$/;
	}
	then {
		modify(out, function() {this.text= "Le meilleur de tous";});
	}
}

rule Ruleiandry {
	when {
		out : Output out.text =~ /.*KFC.$/;
	}
	then {
		modify(out, function() {this.text= " Fuzzy KFC";});
	}
}

//Tout message comportant jour contre
//rule Jour {
//    when {
//        out : Message doesMatch(out.text, /^jour\scontre$/);
//    }
//    then {
//        modify(out, function(){this.text += " nuit";
//        })
//    }
//}


//Tous les messages terminant par mort

rule Rule2{
	when {
		out : Output out.text =~ /.*mort$/;
	}
	then {
		console.log(out.text)
	}
} 


//Nop
function matches(str, regex){
    return regex.test(str);
}
 
rule Hello {
    when {
        out : Output matches(out.text, /^jour\s.*contre?$/);
    }
    then {
        modify(out, function(){this.text += " goodbye";
        })
    }
}

//Tous les messages terminant par mort

rule Rule2{
	when {
		out : Output out.text =~ /.*goodbye$/;
	}
	then {
		console.log(out.text)
	}
} 